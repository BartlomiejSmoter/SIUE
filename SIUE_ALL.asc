Version 4
SHEET 1 1652 1284
WIRE 912 -240 880 -240
WIRE 608 -160 576 -160
WIRE 704 -160 688 -160
WIRE 800 -160 800 -240
WIRE 800 -160 784 -160
WIRE 816 -160 800 -160
WIRE 912 -144 912 -240
WIRE 912 -144 880 -144
WIRE 960 -144 912 -144
WIRE 816 -128 800 -128
WIRE 800 -96 800 -128
WIRE 464 -64 432 -64
WIRE 576 -64 544 -64
WIRE 688 -64 656 -64
WIRE 1120 -64 1088 -64
WIRE 1216 -64 1200 -64
WIRE 1376 -64 1360 -64
WIRE 1488 -64 1456 -64
WIRE 1600 -64 1568 -64
WIRE -416 -48 -960 -48
WIRE -2128 0 -2288 0
WIRE -1760 0 -1792 0
WIRE -1664 0 -1680 0
WIRE 960 0 960 -144
WIRE 976 0 960 0
WIRE 1088 0 1088 -64
WIRE 1088 0 1056 0
WIRE -1456 16 -1488 16
WIRE -1328 16 -1376 16
WIRE 432 16 432 -64
WIRE 480 16 432 16
WIRE 528 16 480 16
WIRE 640 16 592 16
WIRE 688 16 688 -64
WIRE 688 16 640 16
WIRE 1088 32 1088 0
WIRE 1120 32 1088 32
WIRE -384 48 -384 0
WIRE 1216 48 1216 -64
WIRE 1216 48 1184 48
WIRE 1248 48 1216 48
WIRE 1360 48 1360 -64
WIRE 1360 48 1328 48
WIRE 1392 48 1360 48
WIRE 1120 64 1088 64
WIRE 1600 64 1600 -64
WIRE 1600 64 1456 64
WIRE -2288 80 -2288 0
WIRE -2240 80 -2288 80
WIRE 1392 80 1360 80
WIRE -2128 96 -2128 0
WIRE -2128 96 -2176 96
WIRE -1952 96 -2128 96
WIRE -1840 96 -1872 96
WIRE 480 96 480 16
WIRE 480 96 160 96
WIRE 528 96 480 96
WIRE -2320 112 -2336 112
WIRE -2240 112 -2320 112
WIRE -800 112 -880 112
WIRE -416 112 -416 -48
WIRE -416 112 -496 112
WIRE 640 112 640 16
WIRE 640 112 592 112
WIRE 688 112 640 112
WIRE 816 112 768 112
WIRE 944 112 816 112
WIRE 1088 112 1088 64
WIRE 1088 112 1024 112
WIRE 1360 112 1360 80
WIRE -1840 128 -1840 96
WIRE -1792 128 -1792 0
WIRE -1792 128 -1840 128
WIRE -1760 128 -1792 128
WIRE -32 128 -112 128
WIRE 528 128 480 128
WIRE 816 128 816 112
WIRE -1664 144 -1664 0
WIRE -1664 144 -1696 144
WIRE -1600 144 -1664 144
WIRE -1488 144 -1488 16
WIRE -1488 144 -1520 144
WIRE -1440 144 -1488 144
WIRE 1088 144 1088 112
WIRE -1760 160 -1792 160
WIRE -1328 160 -1328 16
WIRE -1328 160 -1376 160
WIRE -800 160 -1328 160
WIRE -320 160 -496 160
WIRE 384 160 160 160
WIRE 480 160 480 128
WIRE -1440 176 -1488 176
WIRE -1792 192 -1792 160
WIRE -1952 208 -1968 208
WIRE -1840 208 -1840 128
WIRE -1840 208 -1872 208
WIRE -1488 208 -1488 176
WIRE -960 208 -960 -48
WIRE -960 208 -1200 208
WIRE -800 208 -960 208
WIRE -384 208 -384 128
WIRE -384 208 -496 208
WIRE -320 208 -320 160
WIRE -2336 224 -2336 192
WIRE -1200 224 -1200 208
WIRE -1200 224 -1248 224
WIRE -1152 224 -1200 224
WIRE -112 224 -112 128
WIRE 208 224 160 224
WIRE 224 224 208 224
WIRE 384 224 384 160
WIRE 384 224 304 224
WIRE 816 224 816 192
WIRE -1152 256 -1152 224
WIRE -992 256 -1024 256
WIRE -864 256 -912 256
WIRE -800 256 -864 256
WIRE -432 256 -496 256
WIRE 384 256 384 224
WIRE -1248 272 -1248 224
WIRE 1088 272 1088 224
WIRE -864 288 -864 256
WIRE -2288 304 -2336 304
WIRE -2192 304 -2208 304
WIRE -2144 304 -2192 304
WIRE -2048 304 -2048 208
WIRE -2048 304 -2064 304
WIRE -432 320 -432 256
WIRE -320 320 -320 288
WIRE -112 320 -112 288
WIRE -2048 336 -2048 304
WIRE -2048 336 -2160 336
WIRE 224 336 224 224
WIRE 400 336 400 320
WIRE -2192 352 -2192 304
WIRE -2160 352 -2160 336
WIRE -1248 352 -1248 336
WIRE -1200 352 -1248 352
WIRE -1152 352 -1152 336
WIRE -1152 352 -1200 352
WIRE 304 352 304 224
WIRE 368 352 368 320
WIRE 368 352 304 352
WIRE 400 352 400 336
WIRE -2048 368 -2048 336
WIRE 64 368 64 336
WIRE -1200 384 -1200 352
WIRE -864 384 -864 352
WIRE -320 416 -320 400
WIRE 224 448 224 416
WIRE 400 448 400 432
WIRE -2176 496 -2176 464
WIRE -2048 496 -2048 448
WIRE -1200 496 -1200 464
WIRE 640 688 16 688
WIRE 16 752 16 688
WIRE 64 752 16 752
WIRE 368 752 320 752
WIRE 416 752 368 752
WIRE 368 768 368 752
WIRE 64 816 -32 816
WIRE -32 848 -32 816
WIRE 368 848 368 832
WIRE 64 880 32 880
WIRE 352 880 320 880
WIRE 32 912 32 880
WIRE 352 912 352 880
WIRE 400 912 352 912
WIRE 640 912 640 688
WIRE 640 912 480 912
WIRE -32 944 -32 912
WIRE 64 944 -32 944
WIRE 368 944 320 944
WIRE -288 960 -288 928
WIRE -160 960 -160 928
WIRE 368 1008 368 944
WIRE 400 1008 368 1008
WIRE 544 1008 480 1008
WIRE 640 1008 640 912
WIRE 640 1008 624 1008
WIRE 368 1120 368 1008
WIRE 368 1120 304 1120
WIRE 416 1120 368 1120
WIRE 640 1120 640 1008
WIRE 640 1120 480 1120
WIRE 368 1152 368 1120
WIRE 368 1264 368 1216
FLAG 64 368 0
FLAG -112 320 0
FLAG 400 448 0
FLAG 400 336 Y
FLAG -160 960 0
FLAG -288 960 0
FLAG 480 160 0
FLAG 816 224 0
FLAG 1088 272 0
FLAG 800 -96 0
FLAG 576 -160 Y
FLAG 1360 112 0
FLAG 416 288 -4V
FLAG 560 144 -4V
FLAG 848 -112 -4V
FLAG 1152 80 -4V
FLAG 1424 96 -4V
FLAG -160 848 4V
FLAG 352 288 4V
FLAG 560 80 4V
FLAG 848 -176 4V
FLAG 1152 16 4V
FLAG -288 848 4.5V
FLAG 1424 32 4.5V
FLAG 368 848 0
FLAG 32 912 0
FLAG 368 1264 0
FLAG 304 1120 -4V
FLAG 416 752 4.5V
FLAG -880 112 4V
FLAG -432 320 0
FLAG -1024 256 4V
FLAG -864 384 0
FLAG -1200 496 0
FLAG -384 0 4V
FLAG -384 208 FOUT
FLAG -1408 192 -4V
FLAG -1408 128 4V
FLAG -1488 208 0
FLAG -1728 176 -4V
FLAG -1728 112 4V
FLAG -1792 192 0
FLAG -2208 128 -4V
FLAG -2208 64 4V
FLAG -2336 224 0
FLAG -2320 112 X
FLAG -2176 496 0
FLAG -2048 496 0
FLAG -2336 304 4V
FLAG -320 416 0
FLAG 224 448 0
FLAG 208 224 FOUT
SYMBOL Switches\\ADG779 64 176 M0
SYMATTR InstName U1
SYMBOL cap -128 224 R0
SYMATTR InstName C1
SYMATTR Value 33n
SYMBOL voltage 400 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 2
SYMBOL OpAmps\\AD8034 320 288 R270
SYMATTR InstName U2
SYMBOL voltage -160 832 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 4
SYMBOL voltage -288 832 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 4.5
SYMBOL OpAmps\\AD8034 560 48 R0
SYMATTR InstName U3
SYMBOL cap 592 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 220n
SYMBOL res 672 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 560m
SYMBOL res 784 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL cap 800 128 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL OpAmps\\opamp2 848 -208 R0
WINDOW 3 9 93 Left 2
SYMATTR InstName U4
SYMATTR Value opa348
SYMBOL res 1040 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 47k
SYMBOL res 1104 240 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 47k
SYMBOL res 1072 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 47k
SYMBOL res 1216 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 47k
SYMBOL res 896 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 800 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 12m
SYMBOL res 1472 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 20m
SYMBOL res 1344 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL OpAmps\\AD8034 1152 -16 R0
SYMATTR InstName U5
SYMBOL OpAmps\\AD8034 1424 0 R0
SYMATTR InstName U6
SYMBOL LT1054 192 848 R0
SYMATTR InstName U7
SYMBOL cap 352 768 R0
SYMATTR InstName C4
SYMATTR Value 2µ
SYMBOL res 496 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 20k
SYMBOL cap -48 848 R0
SYMATTR InstName C5
SYMATTR Value 10µ
SYMBOL cap 480 1104 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 2n
SYMBOL cap 352 1152 R0
SYMATTR InstName C7
SYMATTR Value 100µ
SYMBOL res 496 992 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 82k
SYMBOL LM331m1 -640 176 M0
SYMATTR InstName X1
SYMBOL res -896 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 6.8k
SYMBOL cap -880 288 R0
SYMATTR InstName C8
SYMATTR Value 1n
SYMBOL cap -1264 272 R0
SYMATTR InstName C9
SYMATTR Value 10n
SYMBOL res -1168 240 R0
SYMATTR InstName R14
SYMATTR Value 22k
SYMBOL res -1216 368 R0
SYMATTR InstName R15
SYMATTR Value 47
SYMBOL res -336 192 R0
SYMATTR InstName R16
SYMATTR Value 47k
SYMBOL res -400 32 R0
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL OpAmps\\opamp2 -1408 96 R0
WINDOW 3 9 93 Left 2
SYMATTR InstName U8
SYMATTR Value opa348
SYMBOL res -1504 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 33k
SYMBOL res -1360 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 33k
SYMBOL OpAmps\\opamp2 -1728 80 R0
WINDOW 3 9 93 Left 2
SYMATTR InstName U9
SYMATTR Value opa348
SYMBOL res -1664 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 33k
SYMBOL res -1856 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 33k
SYMBOL res -1856 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 27k
SYMBOL OpAmps\\opamp2 -2208 32 R0
WINDOW 3 9 93 Left 2
SYMATTR InstName U10
SYMATTR Value opa348
SYMBOL voltage -2336 96 R0
WINDOW 0 32 66 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 1
SYMBOL TLV431 -2176 416 R270
SYMATTR InstName U11
SYMBOL res -2048 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 31 63 VTop 2
SYMATTR InstName R23
SYMATTR Value 10k
SYMBOL res -2064 464 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL res -2192 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 1.5k
SYMBOL res -1952 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName POT_20K
SYMATTR Value 20k
SYMBOL res 560 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName POT_1k
SYMATTR Value 1k
SYMBOL res -336 416 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName POT_20k_2
SYMATTR Value 20k
SYMBOL res 704 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName POT_20K_3
SYMATTR Value 20k
SYMBOL voltage 224 320 R0
WINDOW 3 254 165 Right 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3.3 1.07e-5 1n 1n 1.07e-5 2.15e-5)
SYMBOL res 1584 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName POT_20k_4
SYMATTR Value 20k
SYMBOL res 640 992 R90
WINDOW 0 0 71 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName POT_20k_5
SYMATTR Value 20k
TEXT -168 -192 Left 2 !.inc opa348.lib
TEXT -168 -168 Left 2 !.inc TLV2372.lib
TEXT -168 -144 Left 2 !.inc opamp.sub
TEXT -168 -120 Left 2 !.tran 0 20m 10m
TEXT 1112 152 Left 2 ;TLV2372IDGKR
TEXT 1344 152 Left 2 ;TLV2372IDGKR
TEXT -336 1008 Left 2 ;LDO 4V LP2985IM5-4.0
