*$
* OPA348 SPICE Macro-model
*
*   Rev. A    17 March 2003, by W.K. Sands
*
*   Rev. B    18 March 2003 By Neil Albaugh: ADDED HEADER TEXT & EDITED TEXT
*
* This macromodel has been optimized to model the AC, DC, and transient response performance within
*     the device data sheet specified limits.
*     Correct operation of this macromodel has been verified on MicroSim P-Spice ver. 8.0 and on
*     PENZAR Development TopSPICE ver. 6.82d. For help with other analog simulation software,
*     please consult your software supplier.
*
*
* ------------------------------------------------------------------------
*|(C) Copyright Texas Instruments Incorporated 2007. All rights reserved. |
*|                                                                        |
*|This Model is designed as an aid for customers of Texas Instruments.    |
*|No warranties, either expressed or implied, with respect to this Model  |
*|or its fitness for a particular purpose is claimed by Texas Instruments |
*|or the author.  The Model is licensed solely on an "as is" basis.  The  |
*|entire risk as to its quality and performance is with the customer.     |
* ------------------------------------------------------------------------
*
*
*   OPA348 SPICE MODEL PERFORMANCE
*
* MODEL FEATURES INCLUDE OPEN LOOP GAIN AND PHASE, INPUT
* VOLTAGE NOISE W 1/F, INPUT CURRENT NOISE W F^2, OFFSET
* CHANGE AT TRANSITION WHEN CMV NEAR POSITIVE RAIL, INPUT
* BIAS CURRENT, INPUT CAPACITANCE, INPUT COMMON MODE VOLT-
* AGE RANGE, INPUT CLAMPS TO RAILS, CMRR WITH FREQUENCY
* EFFECTS, PSRR WITH FREQUENCY EFFECTS, SLEW RATE, QUIE-
* SCENT CURRENT, QUIESCENT CURRENT VS VOLTAGE, QUIESCENT
* CURRENT VS TEMPERATURE, RAIL TO RAIL OUTPUT STAGE, HIGH
* CLOAD EFFECTS, CLASS AB BIAS IN OUTPUT STAGE, OUTPUT
* CURRENT THROUGH SUPPLIES, OUTPUT CURRENT LIMITING, OUT-
* PUT LIMIT VCC EFFECTS, OUTPUT CLAMPS TO RAILS, OUTPUT
* SWING VS OUTPUT CURRENT
*
* MODEL TEMP RANGE IS -40 TO +125 DEG C.
*
* NOTE THAT THE MODEL IS FUNCTIONAL OVER THIS RANGE BUT NOT
* ALL PARAMETERS MAY ACCURATELY TRACK THOSE OF THE REAL PART.
*
*
*   Begin OPA348 macromodel
*
* PINOUT ORDER +IN -IN +V -V OUT
* PINOUT ORDER  1   3   5  2  4
* PINOUT IS FOR SC70-5 PACKAGE
.SUBCKT OPA348 1 3 5 2 4
* BEGIN NOTES
* FOR ACCURATE INPUT BIAS
* CURRENTS, USE GMIN=1E-13
* MODEL TEMPERATURE RANGE IS
* -40 C TO +125 C, NOT ALL
* PARAMETERS TRACK THOSE OF
* THE REAL PART VS TEMPERATURE
* END NOTES
* BEGIN FEATURES
* OPEN LOOP GAIN AND PHASE
* INPUT VOLTAGE NOISE W 1/F
* INPUT CURRENT NOISE W F^2
* OFFSET CHANGE AT TRANSITION
* WHEN CMV NEAR POSITIVE RAIL
* INPUT BIAS CURRENT
* INPUT CAPACITANCE
* INPUT COMMON MODE VOLTAGE RANGE
* INPUT CLAMPS TO RAILS
* CMRR WITH FREQUENCY EFFECTS
* PSRR WITH FREQUENCY EFFECTS
* SLEW RATE
* QUIESCENT CURRENT
* QUIESCENT CURRENT VS VOLTAGE
* QUIESCENT CURRENT VS TEMPERATURE
* RAIL TO RAIL OUTPUT STAGE
* HIGH CLOAD EFFECTS
* CLASS AB BIAS IN OUTPUT STAGE
* OUTPUT CURRENT THROUGH SUPPLIES
* OUTPUT CURRENT LIMITING
* OUTPUT LIMIT VCC EFFECTS
* OUTPUT CLAMPS TO RAILS
* OUTPUT SWING VS OUTPUT CURRENT
* END FEATURES
Q21 6 7 8 QNL
R77 9 10 2
R78 11 10 2
R79 12 7 100
R80 13 14 100
R81 15 5 15
R82 2 16 15
R84 17 18 2.4E3
R85 19 20 15
R86 8 21 15
D21 4 5 DD
D22 2 4 DD
D23 22 0 DIN
D24 23 0 DIN
I24 0 22 0.1E-3
I25 0 23 0.1E-3
E25 8 0 2 0 1
E26 20 0 5 0 1
D25 24 0 DVN
D26 25 0 DVN
I26 0 24 0.1E-3
I27 0 25 0.1E-3
E27 26 3 24 25 0.75
G13 27 3 22 23 1E-6
E28 28 0 20 0 1
E29 29 0 8 0 1
E30 30 0 31 0 1
R88 28 32 1E6
R89 29 33 1E6
R90 30 34 1E6
R91 0 32 100
R92 0 33 100
R93 0 34 100
E31 35 1 34 0 -0.7
R94 36 31 1E3
R95 31 37 1E3
C29 28 32 0.2E-12
C30 29 33 0.2E-12
C31 30 34 200E-12
E32 38 35 33 0 0.55
E33 27 38 32 0 0.55
E34 39 8 20 8 0.5
D27 40 20 DD
D28 8 40 DD
M24 41 42 16 16 NOUT L=3U W=2000U
M25 43 44 15 15 POUT L=3U W=2000U
M26 45 45 19 19 POUT L=3U W=2000U
M27 46 47 9 9 PIN L=3U W=90U
M28 48 26 11 11 PIN L=3U W=90U
M29 49 49 21 21 NOUT L=3U W=2000U
R96 50 44 100
R97 51 42 100
G14 40 39 52 39 0.2E-3
R98 39 40 3E6
C32 18 4 30E-12
R99 8 46 2.05E3
R100 8 48 2.05E3
C33 46 48 18E-12
C34 27 0 5E-12
C35 26 0 5E-12
C36 4 0 1P
D29 42 6 DD
D30 53 44 DD
Q22 53 13 20 QPL
V27 27 47 0
M30 54 55 56 56 NIN L=3U W=90U
R101 57 56 2
M31 58 26 59 59 NIN L=3U W=90U
R102 57 59 2
R103 54 20 2.05E3
R104 58 20 2.05E3
C37 54 58 18E-12
V28 47 55 1E-3
M32 60 61 62 62 PINT L=6U W=500U
M33 63 64 20 20 PIN L=6U W=500U
V29 20 61 1.25
M34 57 60 8 8 NIN L=6U W=500U
M35 60 60 8 8 NIN L=6U W=500U
G15 40 39 65 39 0.2E-3
I28 45 49 20E-6
E35 37 0 27 0 1
E36 36 0 3 0 1
M36 64 64 20 20 PIN L=6U W=500U
I29 64 8 37.5E-6
V30 63 10 0
R105 4 43 135
R106 41 4 135
J5 66 27 66 JC
J6 66 26 66 JC
J7 26 67 26 JC
J8 27 67 27 JC
C38 27 26 3E-12
E37 68 39 58 54 1
R107 68 65 10E3
C39 65 39 6E-12
E38 69 39 48 46 1
R108 69 52 10E3
C40 52 39 6E-12
G16 70 39 40 39 -1E-3
G17 39 71 40 39 1E-3
G18 39 72 49 8 1E-3
G19 73 39 20 45 1E-3
D31 73 70 DD
D32 71 72 DD
R110 70 73 100E6
R111 72 71 100E6
R112 73 20 1E3
R113 8 72 1E3
E39 20 50 20 73 1
E40 51 8 72 8 1
R114 71 39 1E6
R115 72 39 1E6
R116 39 73 1E6
R117 39 70 1E6
R118 2 5 1E6
G20 5 2 74 0 -46E-6
D33 75 0 DD
V33 75 74 0.65
R119 0 74 1E6
I31 5 2 12.8E-6
I32 27 0 0.5E-12
I33 26 0 0.5E-12
R120 62 63 1.5E3
V43 40 17 0
H2 76 39 V43 -2.5E3
D49 40 76 DE
D50 76 40 DE
I34 0 75 1E-3
C45 77 26 1E-12
C46 77 27 1E-12
R122 0 77 220
E41 77 0 22 23 210
V45 20 66 0.2
V46 67 8 0.2
E42 5 14 5 15 4
E43 12 2 16 2 4
.MODEL JC NJF IS=1E-18
.MODEL DVN D KF=7E-14 IS=1E-16
.MODEL DIN D
.MODEL DD D
.MODEL DE D IS=3E-17
.MODEL QPL PNP
.MODEL QNL NPN
.MODEL POUT PMOS KP=200U VTO=-0.7
.MODEL NOUT NMOS KP=200U VTO=0.7
.MODEL PIN PMOS KP=200U VTO=-0.7
.MODEL NIN NMOS KP=200U VTO=0.7
.MODEL PINT PMOS KP=200U VTO=-0.7 LAMBDA=0.01
.ENDS
